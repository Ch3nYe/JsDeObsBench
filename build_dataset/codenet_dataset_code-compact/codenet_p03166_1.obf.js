'use strict';console['log'](function(args){const tmp=args['trim']()['split']('\x0a')['map'](r=>r['split']('\x20')['map'](v=>v|0x0));const N=tmp[0x0][0x0],M=tmp[0x0][0x1];const x=[],y=[];for(let i=0x0;i<M;i++){x['push'](tmp[0x1+i][0x0]);y['push'](tmp[0x1+i][0x1]);}const dp=Array(M+0x1)['fill'](0x0)['map'](_=>Array(N+0x1)['fill'](0x0));for(let i=0x1;i<=M;i++){for(let j=0x0;j<M;j++){dp[i][y[j]]=Math['max'](dp[i][y[j]],dp[i-0x1][x[j]]+0x1);}}return Math['max'](...dp[M])['toString']();}(require('fs')['readFileSync']('/dev/stdin','utf8')));