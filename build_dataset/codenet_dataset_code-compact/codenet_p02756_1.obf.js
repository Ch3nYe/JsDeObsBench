function Main(input){'use strict';const temp=input['split']('\x0a');const s=temp['shift']()['split']();const q=parseInt(temp['shift']());const queries=temp['map'](query=>query['split']('\x20'));let reverse_flag=0x0;for(let i=0x0;i<q;i++){const query=queries[i];if(query['length']==0x1)reverse_flag=(reverse_flag+0x1)%0x2;else if(query['length']==0x3){if(reverse_flag+parseInt(query[0x1])%0x2==0x0)s['push'](query[0x2]);else s['unshift'](query[0x2]);}}if(reverse_flag)console['log'](s['reverse']()['join']('')+'\x0a');else console['log'](s['join']('')+'\x0a');}Main(require('fs')['readFileSync']('/dev/stdin','utf8'));