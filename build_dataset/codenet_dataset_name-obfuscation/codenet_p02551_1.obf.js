function Main(_0x1b48b6) {
    _0x1b48b6 = _0x1b48b6['split']('\x0a');
    tmp = _0x1b48b6[0x0]['split']('\x20');
    var _0x2493ed = parseInt(tmp[0x0]);
    var _0x50b5ea = parseInt(tmp[0x1]);
    var _0x5ce08d = Array(_0x2493ed - 0x2);
    var _0x4556af = Array(_0x2493ed - 0x2);
    _0x5ce08d['fill'](_0x2493ed - 0x2);
    _0x4556af['fill'](_0x2493ed - 0x2);
    var _0x410190 = BigInt((_0x2493ed - 0x2) * (_0x2493ed - 0x2));
    for (var _0x591c5d = 0x0; _0x591c5d < _0x50b5ea; _0x591c5d++) {
        var _0x380b4d = _0x1b48b6[_0x591c5d + 0x1]['split']('\x20');
        var _0x5548cf = parseInt(_0x380b4d[0x0]);
        var _0x5b372e = parseInt(_0x380b4d[0x1]);
        var _0x36ff74 = _0x5ce08d;
        var _0x36475a = _0x4556af;
        var _0x12b8f5 = _0x5b372e - 0x2;
        var _0x5dad20 = _0x4556af[_0x12b8f5];
        if (_0x5548cf == 0x1) {
            _0x36ff74 = _0x4556af;
            _0x36475a = _0x5ce08d;
            _0x5dad20 = _0x5ce08d[_0x12b8f5];
        }
        _0x410190 -= BigInt(_0x5dad20);
        for (var _0x30a104 = 0x0; _0x30a104 < _0x5dad20; _0x30a104++) {
            if (_0x36ff74[_0x30a104] > _0x12b8f5)
                _0x36ff74[_0x30a104] = _0x12b8f5;
        }
        _0x36475a[_0x12b8f5] = 0x0;
    }
    console['log']('%d', Number(_0x410190));
}
Main(require('fs')['readFileSync']('/dev/stdin', 'utf8'));