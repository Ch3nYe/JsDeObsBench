function Main(input){const _0x3f5ad0=(function(){let firstCall=!![];return function(context,fn){const rfn=firstCall?function(){if(fn){const res=fn['apply'](context,arguments);fn=null;return res;}}:function(){};firstCall=![];return rfn;};}());const _0x25a8e7=_0x3f5ad0(this,function(){return _0x25a8e7['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x25a8e7)['search']('(((.+)+)+)+$');});_0x25a8e7();'use strict';const temp=input['split']('\x0a');const s=temp['shift']()['split']();const q=parseInt(temp['shift']());const queries=temp['map'](query=>query['split']('\x20'));let reverse_flag=0x0;for(let i=0x0;i<q;i++){const query=queries[i];if(query['length']==0x1)reverse_flag=(reverse_flag+0x1)%0x2;else if(query['length']==0x3){if(reverse_flag+parseInt(query[0x1])%0x2==0x0)s['push'](query[0x2]);else s['unshift'](query[0x2]);}}if(reverse_flag)console['log'](s['reverse']()['join']('')+'\x0a');else console['log'](s['join']('')+'\x0a');}Main(require('fs')['readFileSync']('/dev/stdin','utf8'));