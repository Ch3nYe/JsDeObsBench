'use strict';main(require('fs')['readFileSync']('/dev/stdin','utf8')['replace'](/\r?\n$/,'')['split'](/\r?\n/));function main(lines){var _0x5649b5=(function(){var firstCall=!![];return function(context,fn){var rfn=firstCall?function(){if(fn){var res=fn['apply'](context,arguments);fn=null;return res;}}:function(){};firstCall=![];return rfn;};}());var _0x836c67=_0x5649b5(this,function(){return _0x836c67['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x836c67)['search']('(((.+)+)+)+$');});_0x836c67();var str=lines['shift']();lines['shift']();var code;while(code=lines['shift']()){code=code['split']('\x20');var from=+code[0x1],to=+code[0x2];switch(code[0x0]){case'print':console['log'](str['slice'](from,to+0x1));break;case'replace':str=str['slice'](0x0,from)+code[0x3]+str['slice'](to+0x1);break;case'reverse':str=str['slice'](0x0,from)+str['slice'](from,to+0x1)['split']('')['reverse']()['join']('')+str['slice'](to+0x1);break;}}}