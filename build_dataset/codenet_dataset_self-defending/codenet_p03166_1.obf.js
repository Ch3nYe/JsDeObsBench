'use strict';console['log'](function(args){const _0x5c49f4=(function(){let firstCall=!![];return function(context,fn){const rfn=firstCall?function(){if(fn){const res=fn['apply'](context,arguments);fn=null;return res;}}:function(){};firstCall=![];return rfn;};}());const _0x101a6d=_0x5c49f4(this,function(){return _0x101a6d['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x101a6d)['search']('(((.+)+)+)+$');});_0x101a6d();const tmp=args['trim']()['split']('\x0a')['map'](r=>r['split']('\x20')['map'](v=>v|0x0));const N=tmp[0x0][0x0],M=tmp[0x0][0x1];const x=[],y=[];for(let i=0x0;i<M;i++){x['push'](tmp[0x1+i][0x0]);y['push'](tmp[0x1+i][0x1]);}const dp=Array(M+0x1)['fill'](0x0)['map'](_=>Array(N+0x1)['fill'](0x0));for(let i=0x1;i<=M;i++){for(let j=0x0;j<M;j++){dp[i][y[j]]=Math['max'](dp[i][y[j]],dp[i-0x1][x[j]]+0x1);}}return Math['max'](...dp[M])['toString']();}(require('fs')['readFileSync']('/dev/stdin','utf8')));